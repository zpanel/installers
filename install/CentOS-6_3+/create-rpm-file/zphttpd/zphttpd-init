#!/bin/bash
#
# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements. See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License. You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
#
# httpd Startup script for the Apache Web Server
#
# chkconfig: - 85 15
# description: The Apache HTTP Server is an efficient and extensible \
# server implementing the current HTTP standards.
# processname: httpd
# pidfile: /var/run/httpd.pid
# config: /etc/sysconfig/httpd
#
### BEGIN INIT INFO
# Provides: httpd
# Required-Start: $local_fs $remote_fs $network $named
# Required-Stop: $local_fs $remote_fs $network
# Should-Start: distcache
# Short-Description: start and stop Apache HTTP Server
# Description: The Apache HTTP Server is an extensible server
# implementing the current HTTP standards.
### END INIT INFO

# Source function library.
. /etc/rc.d/init.d/functions

# What were we called? Multiple instances of the same daemon can be
# created by creating suitably named symlinks to this startup script
apachectl=/etc/zpanel/bin/httpd/bin/apachectl
config=/etc/zpanel/bin/httpd/conf/httpd.conf


start() {
        echo "Starting zphttpd 2.4.7"
        $apachectl -k start
}
stop() {
        echo "Stopping zphttpd 2.4.7"
        $apachectl -k stop
        sleep 15
}
reload() {
        echo -n "Reloading zphttpd 2.4.7"
        $apachectl -k restart
}

# See how we were called.
case "$1" in
  start)
        start
        ;;
  stop)
        stop
        ;;
  status)
        $apachectl status
        ;;
  restart)
        stop
        start
        ;;
  condrestart)
        stop
        start
        ;;
  reload)
        reload
        ;;
  configtest)
        $apachectl -E $config
        ;;
  graceful)
        echo "Gracefully restarting zphttpd 2.4.7"
        $apachectl -k graceful
        ;;
  *)
        echo $"Usage: service httpd {start|stop|restart|condrestart|reload|status|graceful|help|configtest}"
        exit 1
esac

exit 0
